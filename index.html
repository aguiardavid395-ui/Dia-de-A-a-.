<!doctype html>
<html lang="pt-BR" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dia de AÃ§aÃ­ Express</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Nunito', sans-serif; }
    .gradient-acai { background: linear-gradient(135deg, #4a1a6b 0%, #7b2d8e 50%, #9c3fa0 100%); }
    .btn-acai { background-color: #9c3fa0; color: white; border-radius: 12px; font-weight: 800; transition: all 0.2s; cursor: pointer; }
    .btn-acai:active { transform: scale(0.95); }
    .chip { border: 1.5px solid #e5e7eb; border-radius: 12px; padding: 12px 6px; font-size: 11px; font-weight: 700; text-align: center; cursor: pointer; background: white; color: #4b5563; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; transition: 0.2s; }
    .chip.selected { border-color: #9c3fa0; background-color: #fdf4ff; color: #9c3fa0; border-width: 2px; }
    .ai-bubble { background: #f3e8ff; border: 1px solid #d8b4fe; border-radius: 15px 15px 15px 0px; padding: 10px; font-size: 11px; color: #6b21a8; font-weight: 700; }
    .payment-card { border: 2px solid #f3f4f6; border-radius: 16px; padding: 15px; text-align: center; cursor: pointer; font-weight: 800; font-size: 12px; }
    .payment-card.selected { border-color: #9c3fa0; background-color: #fdf4ff; color: #9c3fa0; }
    .slide-up { animation: slideUp 0.3s ease-out; }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
  </style>
</head>
<body class="h-full bg-gray-50">
  <div id="app" class="max-w-lg mx-auto h-full flex flex-col bg-white shadow-2xl overflow-hidden relative">
    
    <header class="gradient-acai p-6 text-white shadow-lg flex justify-between items-center">
      <div>
        <h1 class="font-black italic text-xl uppercase tracking-tighter text-yellow-300">ğŸ§ Dia de AÃ§aÃ­ Express</h1>
      </div>
      <button onclick="toggleCart()" class="bg-white/20 p-3 rounded-2xl relative">
        ğŸ›’ <span id="cart-count" class="absolute -top-1 -right-1 bg-yellow-400 text-purple-900 text-[10px] font-black w-5 h-5 rounded-full flex items-center justify-center hidden">0</span>
      </button>
    </header>

    <main class="flex-1 overflow-y-auto p-4 space-y-8 pb-24">
      
      <div class="flex items-start gap-3 mb-4 slide-up">
        <div class="bg-purple-600 p-2 rounded-full text-lg">ğŸ¤–</div>
        <div class="ai-bubble shadow-sm">
          <p id="ai-text">OlÃ¡! Escolha seu aÃ§aÃ­. Extras: Fruta R$ 2,50 | Complemento R$ 3,50. ğŸ˜‹</p>
        </div>
      </div>

      <section>
        <h2 class="text-purple-900 font-black text-lg mb-4 italic underline">ğŸ¥£ Monte Seu AÃ§aÃ­</h2>
        <div class="grid gap-3">
          <div class="bg-white p-4 rounded-[24px] border border-gray-100 flex justify-between items-center shadow-sm">
            <div><p class="font-bold text-gray-800">AÃ§aÃ­ 330ML</p><p class="text-[10px] text-purple-500 font-bold uppercase">2 Frutas + 1 Comp. GrÃ¡tis</p><p class="text-purple-600 font-black text-sm">R$ 13,50</p></div>
            <button onclick="openCust('AÃ§aÃ­ 330ML', 13.50, 2, 1)" class="btn-acai px-5 py-2 text-xs">Montar</button>
          </div>
          <div class="bg-white p-4 rounded-[24px] border border-gray-100 flex justify-between items-center shadow-sm">
            <div><p class="font-bold text-gray-800">AÃ§aÃ­ 400ML</p><p class="text-[10px] text-purple-500 font-bold uppercase">3 Frutas + 3 Comp. GrÃ¡tis</p><p class="text-purple-600 font-black text-sm">R$ 16,50</p></div>
            <button onclick="openCust('AÃ§aÃ­ 400ML', 16.50, 3, 3)" class="btn-acai px-5 py-2 text-xs">Montar</button>
          </div>
          <div class="bg-white p-4 rounded-[24px] border border-gray-100 flex justify-between items-center shadow-sm">
            <div><p class="font-bold text-gray-800">AÃ§aÃ­ 500ML</p><p class="text-[10px] text-purple-500 font-bold uppercase">3 Frutas + 3 Comp. GrÃ¡tis</p><p class="text-purple-600 font-black text-sm">R$ 19,50</p></div>
            <button onclick="openCust('AÃ§aÃ­ 500ML', 19.50, 3, 3)" class="btn-acai px-5 py-2 text-xs">Montar</button>
          </div>
        </div>
      </section>

      <section>
        <h2 class="text-purple-900 font-black text-lg mb-4 italic underline">âœ¨ Copos Prontos (EditÃ¡veis)</h2>
        <div class="grid gap-4">
          <div class="bg-white p-5 rounded-[24px] border border-gray-100 shadow-sm">
            <h3 class="font-black text-gray-800 uppercase italic text-sm">ğŸ« Copo Kinder 400ML</h3>
            <p class="text-[10px] text-gray-400 font-bold mb-3 italic">Morango, Leite em pÃ³, Nutella, Oreo</p>
            <div class="flex justify-between items-center text-sm font-black">
              <span class="text-purple-600">R$ 24,90</span>
              <button onclick="openCust('Copo Kinder 400ML', 24.90, 3, 3, ['Morango'], ['Leite em pÃ³', 'Nutella', 'Oreo'])" class="btn-acai px-6 py-2">Personalizar</button>
            </div>
          </div>
          <div class="bg-yellow-50 p-5 rounded-[24px] border border-yellow-200 shadow-sm">
            <h3 class="font-black text-gray-800 uppercase italic text-sm">ğŸ† CopÃ£o Supremo 500ML</h3>
            <p class="text-[10px] text-gray-400 font-bold mb-3 italic">Morango, Uva, Leite em pÃ³, Kit Kat, Fini</p>
            <div class="flex justify-between items-center text-sm font-black">
              <span class="text-purple-600">R$ 29,90</span>
              <button onclick="openCust('CopÃ£o Supremo 500ML', 29.90, 3, 3, ['Morango', 'Uva'], ['Leite em pÃ³', 'Kit Kat', 'Fini'])" class="btn-acai px-6 py-2">Personalizar</button>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2 class="text-purple-900 font-black text-lg mb-4 italic underline">ğŸ¥¤ Bebidas</h2>
        <div class="bg-white p-4 rounded-[24px] border border-gray-100 flex justify-between items-center shadow-sm">
          <div><p class="font-bold text-gray-800">Ãgua Mineral 500ml</p><p class="text-purple-600 font-black text-sm">R$ 3,50</p></div>
          <div class="flex items-center gap-3 bg-gray-100 p-1 rounded-2xl">
              <button onclick="updateDrinkQuantity(-1)" class="bg-white w-8 h-8 rounded-xl font-black text-purple-600 shadow-sm">-</button>
              <span id="drink-qty" class="font-black text-purple-900 min-w-[20px] text-center">0</span>
              <button onclick="updateDrinkQuantity(1)" class="bg-purple-600 w-8 h-8 rounded-xl font-black text-white shadow-sm">+</button>
          </div>
        </div>
      </section>
    </main>

    <div id="modal-custom" class="fixed inset-0 z-50 hidden bg-black/60 backdrop-blur-sm">
      <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-[40px] max-h-[94%] overflow-y-auto slide-up">
        <div class="sticky top-0 bg-white p-6 border-b flex justify-between items-center z-10">
          <div><h3 id="m-title" class="font-black text-gray-800 text-lg uppercase italic"></h3><p id="m-price-base" class="text-purple-600 font-black text-base"></p></div>
          <button onclick="closeCust()" class="bg-gray-100 p-2 rounded-full font-bold">âœ•</button>
        </div>
        <div class="p-6 space-y-6">
            <div class="bg-yellow-50 border border-yellow-100 p-3 rounded-xl text-center">
                <p class="text-[11px] font-bold text-yellow-700 italic uppercase">ğŸ“ Extra Fruta: R$ 2,50 | ğŸ« Extra Complemento: R$ 3,50</p>
            </div>
            <div>
                <h4 class="font-black text-sm mb-2 italic">ğŸ“ FRUTAS <span id="info-free-f" class="text-purple-600"></span></h4>
                <div id="grid-frutas" class="grid grid-cols-3 gap-2"></div>
            </div>
            <div>
                <h4 class="font-black text-sm mb-2 italic">ğŸ« COMPLEMENTOS <span id="info-free-c" class="text-purple-600"></span></h4>
                <div id="grid-comp" class="grid grid-cols-3 gap-2"></div>
            </div>
            <textarea id="m-obs" class="w-full bg-gray-50 border border-gray-100 rounded-2xl p-4 text-sm outline-none" placeholder="Alguma observaÃ§Ã£o?"></textarea>
        </div>
        <div class="p-6 border-t bg-white sticky bottom-0">
          <button onclick="addToCart()" class="w-full btn-acai py-5 flex justify-between px-8 text-sm shadow-xl"><span>Confirmar</span><span id="m-total">R$ 0,00</span></button>
        </div>
      </div>
    </div>

    <div id="modal-cart" class="fixed inset-0 z-50 hidden bg-black/60 backdrop-blur-sm">
      <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-[40px] max-h-[94%] overflow-y-auto p-6 pb-10">
        <div class="flex justify-between items-center mb-8"><h2 class="text-xl font-black text-gray-800 uppercase italic">Meu Pedido</h2><button onclick="toggleCart()" class="font-bold text-gray-400">âœ•</button></div>
        <div id="cart-list" class="space-y-3 mb-8"></div>
        <div class="mb-8">
          <h4 class="font-black text-sm text-gray-600 mb-4 italic underline text-center">Forma de Pagamento</h4>
          <div class="grid grid-cols-3 gap-3">
            <div onclick="setPay('Pix')" id="pay-Pix" class="payment-card">ğŸ“± Pix</div>
            <div onclick="setPay('CartÃ£o')" id="pay-CartÃ£o" class="payment-card">ğŸ’³ CartÃ£o</div>
            <div onclick="setPay('Dinheiro')" id="pay-Dinheiro" class="payment-card">ğŸ’µ Dinheiro</div>
          </div>
          <div id="pix-area" class="hidden text-center mt-4 p-4 border-2 border-dashed border-purple-300 rounded-2xl">
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=47992657218" class="mx-auto mb-2 rounded-xl">
            <p class="text-xs font-black">Chave Pix: 47992657218</p>
          </div>
          <div id="money-area" class="hidden mt-4">
            <input type="number" id="money-val" oninput="calcChange()" placeholder="Troco para quanto?" class="w-full p-4 border border-purple-200 rounded-2xl text-center font-black">
            <p id="change-res" class="mt-2 text-center text-green-600 font-bold"></p>
          </div>
        </div>
        <div class="bg-purple-950 p-6 rounded-[32px] text-white mb-6 text-center">
          <div class="font-black text-3xl" id="cart-total">R$ 0,00</div>
        </div>
        <button onclick="send()" class="w-full btn-acai py-6 uppercase font-black text-sm">ğŸš€ Finalizar no WhatsApp</button>
      </div>
    </div>
  </div>

  <script>
    let cart = []; let cur = null; let pay = ''; let changeTxt = ''; let drinkCount = 0;
    const db = {
      frutas: [{n:'Morango',e:'ğŸ“'}, {n:'Banana',e:'ğŸŒ'}, {n:'Uva',e:'ğŸ‡'}, {n:'Manga',e:'ğŸ¥­'}],
      comp: [{n:'Leite em pÃ³',e:'ğŸ¥›'}, {n:'Nutella',e:'ğŸ«'}, {n:'Oreo',e:'ğŸª'}, {n:'Kit Kat',e:'ğŸ«'}, {n:'Fini',e:'ğŸ¬'}, {n:'PaÃ§oca',e:'ğŸª'}, {n:'Bis',e:'ğŸ«'}, {n:'Granola',e:'ğŸ¥£'}]
    };

    function toggleCart() { document.getElementById('modal-cart').classList.toggle('hidden'); }
    function closeCust() { document.getElementById('modal-custom').classList.add('hidden'); }

    // FunÃ§Ãµes para Bebida +/-
    function updateDrinkQuantity(val) {
        drinkCount = Math.max(0, drinkCount + val);
        document.getElementById('drink-qty').innerText = drinkCount;
        syncDrinksWithCart();
    }

    function syncDrinksWithCart() {
        // Remove todas as Ã¡guas atuais e adiciona conforme o contador
        cart = cart.filter(i => i.title !== 'Ãgua Mineral');
        for(let i=0; i<drinkCount; i++) {
            cart.push({title: 'Ãgua Mineral', total: 3.50, f:[], c:[], obs:''});
        }
        updateCart();
    }

    function openCust(title, price, freeF, freeC, preF = [], preC = []) {
      cur = { title, price, f: [...preF], c: [...preC], freeF, freeC };
      document.getElementById('m-title').innerText = title;
      document.getElementById('m-price-base').innerText = `R$ ${price.toFixed(2).replace('.', ',')}`;
      document.getElementById('info-free-f').innerText = `(${freeF} grÃ¡tis)`;
      document.getElementById('info-free-c').innerText = `(${freeC} grÃ¡tis)`;
      renderGrid('grid-frutas', db.frutas, 'f');
      renderGrid('grid-comp', db.comp, 'c');
      updateTotal();
      document.getElementById('modal-custom').classList.remove('hidden');
    }

    function renderGrid(id, list, type) {
      document.getElementById(id).innerHTML = list.map(i => {
        const isSelected = cur[type].includes(i.n) ? 'selected' : '';
        return `<div onclick="selectChip(this,'${type}','${i.n}')" class="chip ${isSelected}"><span>${i.e}</span> ${i.n}</div>`
      }).join('');
    }

    function selectChip(el, type, val) {
      el.classList.toggle('selected');
      const pos = cur[type].indexOf(val);
      if(pos > -1) cur[type].splice(pos, 1); else cur[type].push(val);
      updateTotal();
    }

    function updateTotal() {
      const extraF = Math.max(0, cur.f.length - cur.freeF) * 2.50;
      const extraC = Math.max(0, cur.c.length - cur.freeC) * 3.50;
      const total = cur.price + extraF + extraC;
      document.getElementById('m-total').innerText = `R$ ${total.toFixed(2).replace('.', ',')}`;
    }

    function addToCart() {
      const totalStr = document.getElementById('m-total').innerText.replace('R$ ', '').replace(',', '.');
      cart.push({...cur, total: parseFloat(totalStr), obs: document.getElementById('m-obs').value});
      updateCart(); closeCust();
    }

    function updateCart() {
      const sub = cart.reduce((acc, i) => acc + i.total, 0);
      document.getElementById('cart-count').innerText = cart.length;
      document.getElementById('cart-count').classList.toggle('hidden', cart.length === 0);
      document.getElementById('cart-total').innerText = `R$ ${sub.toFixed(2).replace('.', ',')}`;
      document.getElementById('cart-list').innerHTML = cart.map((i, idx) => `
        <div class="bg-gray-50 p-4 rounded-3xl flex justify-between items-center border">
          <div><p class="font-black text-sm uppercase">${i.title}</p><p class="text-[9px] text-purple-500 font-bold">${[...i.f, ...i.c].join(', ')}</p></div>
          <div class="text-right"><p class="font-black text-sm">R$ ${i.total.toFixed(2).replace('.', ',')}</p><button onclick="remove(${idx})" class="text-red-500 text-[10px] underline">Remover</button></div>
        </div>`).join('');
    }

    function remove(idx) { 
        if(cart[idx].title === 'Ãgua Mineral') {
            drinkCount = Math.max(0, drinkCount - 1);
            document.getElementById('drink-qty').innerText = drinkCount;
        }
        cart.splice(idx, 1); 
        updateCart(); 
    }

    function setPay(m) {
      pay = m;
      document.querySelectorAll('.payment-card').forEach(c => c.classList.remove('selected'));
      document.getElementById(`pay-${m}`).classList.add('selected');
      document.getElementById('pix-area').classList.toggle('hidden', m !== 'Pix');
      document.getElementById('money-area').classList.toggle('hidden', m !== 'Dinheiro');
    }

    function calcChange() {
      const total = cart.reduce((acc, i) => acc + i.total, 0);
      const money = parseFloat(document.getElementById('money-val').value) || 0;
      if(money > total) {
        changeTxt = `Troco para R$ ${money.toFixed(2)}`;
        document.getElementById('change-res').innerText = `Troco: R$ ${(money-total).toFixed(2)}`;
      } else { changeTxt = "Sem troco"; document.getElementById('change-res').innerText = ""; }
    }

    function send() {
      if(!pay || cart.length === 0) return alert('Verifique o pedido e o pagamento!');
      let msg = `*NOVO PEDIDO - DIA DE AÃ‡AÃ EXPRESS*\n\nğŸ’³ *Pagamento:* ${pay}\n${pay === 'Dinheiro' ? 'ğŸ’µ *Troco:* ' + changeTxt : ''}\n\n`;
      cart.forEach((i, idx) => {
        msg += `*${idx+1}. ${i.title}*\n`;
        if(i.f.length + i.c.length > 0) msg += `â• Itens: ${[...i.f, ...i.c].join(', ')}\n`;
        if(i.obs) msg += `ğŸ“ Obs: ${i.obs}\n`;
        msg += `ğŸ’° R$ ${i.total.toFixed(2).replace('.', ',')}\n\n`;
      });
      msg += `*TOTAL: ${document.getElementById('cart-total').innerText}*`;
      window.open(`https://wa.me/5547997867225?text=${encodeURIComponent(msg)}`);
    }
  </script>
</body>
</html>
